<!doctype html>
<html>

<head>
    <title>Box Plot Chart</title>
    <script src="../node_modules/chart.js/dist/Chart.bundle.js"></script>
    <script src="../build/Chart.BoxPlot.js" type="text/javascript"></script>
		<script src="./utils.js"></script>
		<script src="https://d3js.org/d3-random.v1.min.js"></script>
    <style>
    canvas {
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
    }
    </style>
</head>

<body>
    <div id="container" style="width: 75%;">
        <canvas id="canvas"></canvas>
    </div>
    <button id="limitMinMax">Limit to min/max</button>
    <button id="limitWhiskers">Limit to whiskers</button>
    <script>
        const samples = this.Samples.utils;
				var color = Chart.helpers.color;
				var b = d3.randomNormal();
				var random = (min, max) => () => (b() * ((max || 1) - (min || 0))) + (min || 0);
				var boxplotData = {
            labels: samples.months({count: 7}),
            datasets: [{
                label: 'Dataset 1',
                backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
                borderColor: window.chartColors.red,
                borderWidth: 1,
                data: samples.boxplots({count: 7, random: random}),
                outlierColor: '#999999',
                padding: 10
            }, {
                label: 'Dataset 2',
                backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
                borderColor: window.chartColors.blue,
                borderWidth: 1,
                data: samples.boxplotsArray({count: 7, random: random}),
                outlierColor: '#999999',
                padding: 10
            }]

				};
				const options = {
						responsive: true,
						legend: {
								position: 'top',
						},
						title: {
								display: true,
								text: 'Chart.js Box Plot Chart'
						},
						scales: {
							xScales: [{
								ticks: {
									minStats: 'min',
									maxStats: 'max'
								}
							}]
						}
				};

        window.onload = function() {
            var ctx = document.getElementById("canvas").getContext("2d");
            window.myBar = new Chart(ctx, {
                type: 'boxplot',
                data: boxplotData,
                options: options
						});

						document.getElementById('limitMinMax').onclick = function() {
							options.scales.xScales[0].ticks.minStats = 'min';
							options.scales.xScales[0].ticks.maxStats = 'max';
							window.myBar.update();
						};
						document.getElementById('limitWhiskers').onclick = function() {
							options.scales.xScales[0].ticks.minStats = 'whiskersMin';
							options.scales.xScales[0].ticks.maxStats = 'whiskersMax';
							window.myBar.update();
						};
				};
    </script>
</body>

</html>
